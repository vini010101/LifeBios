<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel Administrativo - TreeBios</title>
    <link rel="stylesheet" href="admin.css" />
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div id="notification" class="notification"></div>
    <div class="container">
        <nav class="nav-header">
            <button class="nav-button" onclick="window.location.href='../index.html'">
                <i data-lucide="arrow-left"></i>
                voltar
            </button>
            <div class="admin-info">
                <span>Administrador</span>
                <button class="nav-button" onclick="handleLogout()">
                    <i data-lucide="log-out"></i>
                    Sair
                </button>
            </div>
        </nav>

        <main class="dashboard-content">
            <div class="logo-container">
                <img src="/template/treebios_vertical-cor.png" alt="Treebios Logo" class="logo"/>
            </div>

            <h1 class="dashboard-title">Painel Administrativo</h1>


            <section class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i data-lucide="users"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Total de Usuários</h3>
                        <p id="totalUsers">0</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i data-lucide="activity"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Acessos Hoje</h3>
                        <p id="todayAccess">0</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i data-lucide="file-text"></i>
                    </div>
                    <div class="stat-info">
                        <h3>Relatórios Gerados</h3>
                        <p id="totalReports">0</p>
                    </div>
                </div>
            </section>

            <!-- Access Chart -->
            <section class="chart-section">
                <div class="section-header">
                    <h2>Acessos por Dia</h2>
                    <div class="date-filter">
                        <button class="filter-button active">7 dias</button>
                        <button class="filter-button">30 dias</button>
                        <button class="filter-button">90 dias</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="accessChart"></canvas>
                </div>
            </section>

            <!-- Users Table -->
            <section class="users-section">
                <div class="section-header">
                    <h2>Usuários</h2>
                    <button class="add-button" onclick="openUserModal()">
                        <i data-lucide="plus"></i>
                        Novo Usuário
                    </button>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Tipo</th>
                                <th>Último Acesso</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Users will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>


    <div class="modal" id="userModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Novo Usuário</h2>
                <button type="button" class="close-button" onclick="closeUserModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <form id="userForm" onsubmit="handleUserSubmit(event)">
                <div class="form-group">
                    <label for="userName">Nome *</label>
                    <input 
                        type="text" 
                        id="userName" 
                        name="userName" 
                        required 
                        placeholder="Digite o nome completo"
                    >
                </div>
                <div class="form-group">
                    <label for="userEmail">Email *</label>
                    <input 
                        type="email" 
                        id="userEmail" 
                        name="userEmail" 
                        required 
                        placeholder="Digite o email"
                    >
                </div>
                <div class="form-group">
                    <label for="userPassword">Senha *</label>
                    <input 
                        type="password" 
                        id="userPassword" 
                        name="userPassword" 
                        required 
                        minlength="6"
                        placeholder="Mínimo de 6 caracteres"
                    >
                </div>
                <div class="form-group">
                    <label for="userType">Tipo *</label>
                    <select id="userType" name="userType" required>
                        <option value="">Selecione o tipo</option>
                        <option value="user">Usuário</option>
                        <option value="admin">Administrador</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="secondary-button" onclick="closeUserModal()">
                        Cancelar
                    </button>
                    <button type="submit" class="primary-button">
                        Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="../login/auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="admin.js"></script>
</body>
</html>